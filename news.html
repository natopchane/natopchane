<!DOCTYPE html>

<html lang="ru">
<head>
  <link rel="stylesheet" href="css/mobile-fixes.css?v=1">

<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>–ù–æ–≤–æ—Å—Ç–∏ ‚Äî –ù–∞ –¢–û–ü—á–∞–Ω–µ</title>
<!-- SEO -->
<meta content="–°–ª—É—Ö–∏ –∏ –Ω–æ–≤–æ—Å—Ç–∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ –ù–∞ –¢–û–ü—á–∞–Ω–µ: –∑–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–µ, —Å–≤–µ–∂–∏–µ, –ø–æ–∏—Å–∫, –ª–∞–π–∫–∏ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã." name="description"/>
<link href="https://natopchane.github.io/natopchane/news.html" rel="canonical"/>
<meta content="website" property="og:type"/>
<meta content="–ù–æ–≤–æ—Å—Ç–∏ ‚Äî –ù–∞ –¢–û–ü—á–∞–Ω–µ" property="og:title"/>
<meta content="–°–≤–µ–∂–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞, –∑–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –ª–∞–π–∫–∏ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã." property="og:description"/>
<meta content="https://natopchane.github.io/natopchane/news.html" property="og:url"/>
<meta content="https://natopchane.github.io/natopchane/images/news.svg" property="og:image"/>
<meta content="#0ea5e9" name="theme-color"/>
<!-- Favicon -->
<link href="images/news-reporters.svg" rel="icon" type="image/svg+xml"/>
<link href="css/style.css" rel="stylesheet"/>
<!-- TailwindCSS v2 -->
<script src="https://cdn.tailwindcss.com"></script>
<!-- –ù–∞—à–∏ —Å—Ç–∏–ª–∏ -->
<link href="css/style.css?v=3" rel="stylesheet"/>
<style>
    html{background:#fafafa}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.06)}
    .grid-cards{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:18px}
    @media(min-width:768px){.grid-cards{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media(min-width:1180px){.grid-cards{grid-template-columns:repeat(3,minmax(0,1fr))}}
    .prose h1,.prose h2,.prose h3{margin:.6em 0 .4em;font-weight:700}.prose p{margin:.5em 0}
    .badge{display:inline-flex;align-items:center;gap:6px;border-radius:999px;padding:3px 10px;border:1px solid #c7d2fe;background:#eef2ff;color:#3730a3;font-size:12px}
    .btn{display:inline-flex;align-items:center;gap:6px;border:1px solid #e5e7eb;border-radius:12px;padding:8px 12px;font-weight:600}
    .btn-ghost{background:#fff}
    .btn-like[aria-pressed="true"]{border-color:#fb7185;background:#fff1f2}
    /* —Ñ–∏–∫—Å: –≤—ã—Å–æ—Ç–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–∞–¥ —Ñ–∏–∫—Å.–ø–æ–¥–≤–∞–ª–æ–º */

    /* –ê–∫—Ç–∏–≤–Ω–∞—è —Å—Å—ã–ª–∫–∞ –º–µ–Ω—é */
    nav a{color:#374151}
    nav a.active{color:#111827;font-weight:700}
    /* –ú–æ–¥–∞–ª–∫–∞ —Å—Ç–∞—Ç—å–∏ ‚Äî –±–æ–ª—å—à–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    .article-modal{max-width:880px;width:100%}
    .article-scroll{max-height:80vh;overflow:auto}
    .article-cover{width:100%;height:340px;object-fit:cover;border-bottom:1px solid #e5e7eb;border-top-left-radius:16px;border-top-right-radius:16px}
    .read-more{font-size:14px}
  </style>
</head>
<body class="text-gray-900">
<!-- ====== HEADER (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π) ====== -->
<header class="border-b border-gray-200 bg-white">
    <style>header nav a.active{border-bottom: 2px solid currentColor;padding-bottom: 2px}</style>
    <div class="w-full px-2 flex justify-between items-center h-16">
      <a class="flex items-center gap-2 text-xl font-semibold tracking-tight" href="">
        <img alt="–ù–∞ –¢–û–ü—á–∞–Ω–µ" class="shrink-0 w-8 align-middle h-8 object-contain inline-block" decoding="async" height="32" loading="eager" src="images/logo.png" style="display:block;max-width:100%" width="32"/> –ù–∞ –¢–û–ü—á–∞–Ω–µ
      </a>

      <!-- –î–µ—Å–∫—Ç–æ–ø-–º–µ–Ω—é -->
      <nav class="hidden md:flex md:flex-1 justify-center items-center gap-8 whitespace-nowrap">
        <a href="">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="news.html">–ù–æ–≤–æ—Å—Ç–∏</a>
        <a href="ads.html">–†–µ–∫–ª–∞–º–∞</a>
        <a href="videos.html">–í–∏–¥–µ–æ</a>
        <a href="gallery.html">–ì–∞–ª–µ—Ä–µ—è</a>
        <a href="biographies.html">–ë–∏–æ–≥—Ä–∞—Ñ–∏–∏</a>
        <a href="music.html">–ú—É–∑—ã–∫–∞</a>
        <a href="entertainment.html">–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</a>
        <a href="products.html">–ü—Ä–æ–¥—É–∫—Ü–∏—è</a>
        <a href="about.html">–û –Ω–∞—Å</a>
        <a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
      </nav>

      <!-- –ë—É—Ä–≥–µ—Ä -->
      <button aria-label="–ú–µ–Ω—é" class="md:hidden p-2 text-gray-700 text-2xl" id="menu-btn">‚ò∞</button>
    </div>

    <!-- –§–æ–Ω –¥–ª—è –º–æ–±-–º–µ–Ω—é -->
    <div class="hidden" id="menu-backdrop"></div>

    <!-- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é (–æ—Ñ—Ñ-–∫–∞–Ω–≤–∞—Å) -->
    <div class="hidden bg-white md:hidden" id="menu">
      <div class="m-menu-head">
        –ú–µ–Ω—é
        <button class="m-menu-close" id="menuClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
      </div>
      <ul class="m-menu">
        <li><a href="">–ì–ª–∞–≤–Ω–∞—è</a></li>
        <li><a href="news.html">–ù–æ–≤–æ—Å—Ç–∏</a></li>
        <li><a href="ads.html">–†–µ–∫–ª–∞–º–∞</a></li>
        <li><a href="videos.html">–í–∏–¥–µ–æ</a></li>
        <li><a href="gallery.html">–ì–∞–ª–µ—Ä–µ—è</a></li>
        <li><a href="biographies.html">–ë–∏–æ–≥—Ä–∞—Ñ–∏–∏</a></li>
        <li><a href="music.html">–ú—É–∑—ã–∫–∞</a></li>
        <li><a href="entertainment.html">–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</a></li>
        <li><a href="products.html">–ü—Ä–æ–¥—É–∫—Ü–∏—è</a></li>
        <li><a href="about.html">–û –Ω–∞—Å</a></li>
        <li><a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
      </ul>
    </div>
  </header>
<!-- HERO -->
<section class="bg-white border-b">
<div class="max-w-7xl mx-auto px-4 py-6 flex items-center gap-3">
<img alt="" class="w-6 h-6" src="images/news.svg"/>
<h1 class="text-2xl md:text-3xl font-extrabold tracking-tight">–°–õ–£–•–ò –ù–ê –¢–û–ü–ß–ê–ù–ï</h1>
</div>
</section>
<!-- CONTENT -->
<main class="max-w-7xl mx-auto px-4 py-6 space-y-10">
<!-- –ó–∞–∫—Ä–µ–ø -->
<section class="hidden" id="pinned-wrap">
<h2 class="text-xl font-semibold mb-3">–ó–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω–æ–µ</h2>
<div class="grid-cards" id="pinned"></div>
</section>
<!-- –õ–µ–Ω—Ç–∞ -->
<section>
<div class="flex items-center justify-between mb-3">
<h2 class="text-xl font-semibold">–õ–µ–Ω—Ç–∞</h2>
<div class="flex items-center gap-2">
<input class="border rounded-xl px-3 py-1.5 text-sm w-56" id="q" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É‚Ä¶"/>
<button class="btn btn-ghost text-sm" id="clear">–û—á–∏—Å—Ç–∏—Ç—å</button>
</div>
</div>
<div class="grid-cards" id="feed"></div>
<div class="hidden text-sm text-gray-500" id="empty">–ü–æ–∫–∞ –ø—É—Å—Ç–æ</div>
<div class="hidden text-sm text-red-600 mt-2" id="err"></div>
<div class="flex justify-center my-6">
<button class="btn btn-ghost" id="more">–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë</button>
</div>
</section>
</main>
<!-- –ü–û–î–í–ê–õ -->
<footer class="fixed bottom-0 left-0 w-full border-t border-gray-200 bg-white">
<div class="max-w-7xl mx-auto px-4 py-2 text-xs text-gray-500 flex flex-col md:flex-row justify-between items-center gap-2">
<p>¬© 2025 –ù–∞ –¢–û–ü—á–∞–Ω–µ. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
<ul class="soc-row">
<li><a aria-label="VK" href="https://vk.com/natopchane" target="_blank">
<img alt="VK" src="images/soc/vk.svg"/>
</a></li>
<li><a aria-label="Telegram" href="https://t.me/na_topchane" target="_blank">
<img alt="Telegram" src="images/soc/telegram.svg"/>
</a></li>
<li><a aria-label="Instagram" href="https://www.instagram.com/natopchane/" target="_blank">
<img alt="Instagram" src="images/soc/instagram.svg"/>
</a></li>
<li><a aria-label="TikTok" href="https://www.tiktok.com/@natopchane" target="_blank">
<img alt="TikTok" src="images/soc/tik-tok.svg"/>
</a></li>
<li><a aria-label="Pinterest" href="https://www.pinterest.com/natopchane/?invite_code=67d18b04667e4a56b03fb7432127235b&amp;sender=1144266355231499314" target="_blank">
<img alt="Pinterest" src="images/soc/pinterest.svg"/>
</a></li>
<li><a aria-label="Rutube" href="https://rutube.ru/channel/49549724/" target="_blank">
<img alt="Rutube" src="images/soc/rutube.svg"/>
</a></li>
<li><a aria-label="Facebook" href="https://www.facebook.com/groups/natopchane/" target="_blank">
<img alt="Facebook" src="images/soc/fb.svg"/>
</a></li>
<li><a aria-label="Dzen" href="https://dzen.ru/natopchane" target="_blank">
<img alt="Dzen" src="images/soc/yandex.svg"/>
</a></li>
<li><a aria-label="YouTube" href="https://www.youtube.com/@natopchane" target="_blank">
<img alt="YouTube" src="images/soc/youtube.svg"/>
</a></li>
<li><a aria-label="OK" href="https://ok.ru/group/70000013841187" target="_blank">
<img alt="OK" src="images/soc/ok.svg"/>
</a></li>
</ul>
<div class="flex flex-wrap gap-3">
<button class="hover:underline" id="terms-btn">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</button>
<button class="hover:underline" id="support-btn">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>
<button class="hover:underline" id="cooperation-btn">–°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ</button>
<button class="hover:underline" id="privacy-btn">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</button>
</div>
</div>
</footer>
<!-- –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–ê–Ø –ú–û–î–ê–õ–ö–ê (—Ü–µ–Ω—Ç—Ä + –Ω–∞–≤–∏–≥–∞—Ü–∏—è + share) -->
<div class="fixed inset-0 bg-black/50 hidden z-50 flex items-center justify-center p-4" id="modal-overlay">
<!-- —Å—Ç—Ä–µ–ª–∫–∏ -->
<button class="absolute left-4 md:left-6 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white rounded-full w-9 h-9 flex items-center justify-center shadow" id="prev-article">‚Äπ</button>
<button class="absolute right-4 md:right-6 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white rounded-full w-9 h-9 flex items-center justify-center shadow" id="next-article">‚Ä∫</button>
<div class="bg-white article-modal w-full max-w-[880px] p-0 rounded-2xl relative shadow-lg" id="modal-box">
<button class="absolute top-3 right-3 text-gray-500 hover:text-gray-700 text-2xl leading-none" id="modal-close">√ó</button>
<div class="article-scroll">
<img alt="" class="article-cover hidden" id="article-cover"/>
<div class="p-6">
<h2 class="text-2xl font-bold mb-1" id="modal-title"></h2>
<div class="flex flex-wrap items-center gap-3 mb-4">
<div class="text-xs text-gray-500" id="modal-meta"></div>
<div class="ml-auto flex items-center gap-2 text-xs">
<button class="btn btn-ghost py-1 px-2" id="share-copy">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
<a class="btn btn-ghost py-1 px-2" id="share-tg" rel="noopener" target="_blank">TG</a>
<a class="btn btn-ghost py-1 px-2" id="share-vk" rel="noopener" target="_blank">VK</a>
</div>
</div>
<div class="prose text-gray-800" id="modal-content"></div>
</div>
</div>
</div>
</div>
<!-- SCRIPTS -->
<script type="module">
    // Firebase (—á—Ç–µ–Ω–∏–µ/–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç—ã)
    import { firebaseConfig } from './firebase-config.js';
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js';
    import {
      getFirestore, collection, getDocs, query, orderBy, limit, startAfter,
      doc, updateDoc, increment
    } from 'https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js';

    // Helpers
    const $ = (s,r=document)=>r.querySelector(s);
    const feedEl=$('#feed'), emptyEl=$('#empty'), errEl=$('#err'), moreBtn=$('#more');
    const pinWrap=$('#pinned-wrap'), pinEl=$('#pinned'), qInput=$('#q'), clearBtn=$('#clear');

    // Mobile menu
    document.getElementById('menu-btn')?.addEventListener('click',()=>$('#menu').classList.toggle('hidden'));

    // Modal refs
    const overlay = $('#modal-overlay');
    const box = $('#modal-box');
    const mTitle = $('#modal-title');
    const mMeta  = $('#modal-meta');
    const mContent = $('#modal-content');
    const mCover = $('#article-cover');

    // –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∏ share
const btnPrev = document.getElementById('prev-article');
const btnNext = document.getElementById('next-article');
const btnShareCopy = document.getElementById('share-copy');
const aShareTG = document.getElementById('share-tg');
const aShareVK = document.getElementById('share-vk');

let currentIndex = -1; // –∏–Ω–¥–µ–∫—Å –æ—Ç–∫—Ä—ã—Ç–æ–π –Ω–æ–≤–æ—Å—Ç–∏ –≤ cache

    // –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
    document.getElementById('menu-btn').addEventListener('click', () => {
      document.getElementById('menu').classList.toggle('hidden');
    });

    // –ú–æ–¥–∞–ª–∫–∏ (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è)
    const modal = document.getElementById('modal-overlay');
    const title = document.getElementById('modal-title');
    const content = document.getElementById('modal-content');

    document.getElementById('privacy-btn').onclick = () => {
      title.textContent = '–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏';
      content.innerHTML = `
        <p>–ú—ã —É–≤–∞–∂–∞–µ–º –≤–∞—à—É –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å–∞–π—Ç–∞ ¬´–ù–∞ –¢–û–ü—á–∞–Ω–µ¬ª –º—ã –º–æ–∂–µ–º —Å–æ–±–∏—Ä–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: IP-–∞–¥—Ä–µ—Å, cookie, email (–ø—Ä–∏ –ø–æ–¥–ø–∏—Å–∫–µ –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É).</p>
        <p>–î–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å–∞–π—Ç–∞, –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ—Å–µ—â–µ–Ω–∏–π.</p>
        <p>–ú—ã –Ω–µ –ø–µ—Ä–µ–¥–∞—ë–º –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º, –∫—Ä–æ–º–µ —Å–ª—É—á–∞–µ–≤, –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö –∑–∞–∫–æ–Ω–æ–º.</p>
        <p>–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø–∏—Å–∞–≤ –Ω–∞–º –Ω–∞ support@example.com.</p>
        <p>–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª–∏—Ç–∏–∫–∏ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.</p>
      `;
      modal.classList.remove('hidden');
    };

    document.getElementById('terms-btn').onclick = () => {
      title.textContent = '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ';
      content.innerHTML = `
        <p>–ò—Å–ø–æ–ª—å–∑—É—è —Å–∞–π—Ç ¬´–ù–∞ –¢–û–ü—á–∞–Ω–µ¬ª, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏:</p>
        <ul class="list-disc pl-5 space-y-1">
          <li>–ù–µ —Ä–∞–∑–º–µ—â–∞—Ç—å –Ω–µ–∑–∞–∫–æ–Ω–Ω—ã–π –∏–ª–∏ –æ—Å–∫–æ—Ä–±–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç.</li>
          <li>–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∞–π—Ç –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏ —Å–ø–∞–º–∞ –∏–ª–∏ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞.</li>
          <li>–°–æ–±–ª—é–¥–∞—Ç—å –∞–≤—Ç–æ—Ä—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –Ω–∞ –ø—É–±–ª–∏–∫—É–µ–º—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª.</li>
          <li>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.</li>
        </ul>
        <p>–ü—Ä–∏ –Ω–µ—Å–æ–≥–ª–∞—Å–∏–∏ —Å —É—Å–ª–æ–≤–∏—è–º–∏ –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∞–π—Ç–∞.</p>
      `;
      modal.classList.remove('hidden');
    };

    document.getElementById('support-btn').onclick = () => {
      title.textContent = '–ü–æ–¥–¥–µ—Ä–∂–∫–∞';
      content.innerHTML = `
        <p>–ü–æ –ª—é–±—ã–º –≤–æ–ø—Ä–æ—Å–∞–º –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–∞–º:</p>
        <p class="flex items-center gap-2">
          <img src="images/telegram.svg" alt="Telegram" class="w-5 h-5">
          <a href="https://t.me/levakand_pro" target="_blank" class="text-blue-600 hover:underline">–ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram</a>
        </p>
      `;
      modal.classList.remove('hidden');
    };

    document.getElementById('cooperation-btn').onclick = () => {
      title.textContent = '–°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–∫–ª–∞–º–∞';
      content.innerHTML = `
        <p>–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º —Ä–µ–∫–ª–∞–º—ã –∏ —Å–æ–≤–º–µ—Å—Ç–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏:</p>
        <p class="flex items-center gap-2">
          <img src="images/telegram.svg" alt="Telegram" class="w-5 h-5">
          <a href="https://t.me/levakand_pro" target="_blank" class="text-blue-600 hover:underline">Telegram</a>
        </p>
        <p class="flex items-center gap-2">
          <img src="images/gmail.svg" alt="Gmail" class="w-5 h-5">
          <a href="mailto:natopchane@gmail.com" class="text-red-600 hover:underline">natopchane@gmail.com</a>
        </p>
      `;
      modal.classList.remove('hidden');
    };

    // Close modal
    $('#modal-close').onclick = ()=> overlay.classList.add('hidden');
    overlay.onclick = (e)=>{ if(e.target===overlay) overlay.classList.add('hidden'); };
    document.addEventListener('keydown', e=>{ if(e.key==='Escape') overlay.classList.add('hidden'); });

    // Firestore
    const app = initializeApp(firebaseConfig);
    const db  = getFirestore(app);

    // State
    const pageSize = 12;
    let lastDoc = null;
    let cache = [];
    const seenOnce = new Set();

    const esc = s => (s||'').toString()
      .replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;');

    // –û–±—Ä–µ–∑–∫–∞ HTML –¥–æ –ø—Ä–µ–≤—å—é (—á–∏—Å—Ç–∏–º —Ç–µ–≥–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É)
    function htmlPreview(html, max=280){
      const text = (html||'').replace(/<[^>]*>/g,' ').replace(/\s+/g,' ').trim();
      if(text.length<=max) return esc(text);
      return esc(text.slice(0,max)) + '‚Ä¶';
    }

    // –ö–∞—Ä—Ç–æ—á–∫–∞
    const card = (n)=>`
      <article class="card overflow-hidden" data-id="${n.id}">
        ${n.cover?`<img loading="lazy" src="${esc(n.cover)}" alt="" class="w-full h-48 object-cover border-b">`:''}
        <div class="p-4 space-y-3">
          <div class="flex items-center justify-between">
            <h3 class="font-semibold text-lg">${esc(n.title||'–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è')}</h3>
            ${n.pinned?'<span class="badge">–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–æ</span>':''}
          </div>

          <p class="text-sm text-gray-800">${htmlPreview(n.html, 280)}</p>

          <div class="flex items-center justify-between">
            <button class="btn btn-ghost read-more" data-open="${n.id}">–ß–∏—Ç–∞—Ç—å –¥–∞–ª—å—à–µ</button>
            <div class="flex items-center gap-4 text-xs text-gray-600">
              <button class="btn btn-ghost btn-like" data-like="${n.id}" aria-pressed="${liked(n.id)}">
                ‚ù§Ô∏è <span class="like-count">${n.likes||0}</span>
              </button>
              <span class="inline-flex items-center gap-1">
                üëÅ <span class="view-count">${n.views||0}</span>
              </span>
            </div>
          </div>
        </div>
      </article>`;

    function liked(id){
      try{ return localStorage.getItem('news_like_'+id)==='1'; }catch{ return false; }
    }
    function markLiked(id){
      try{ localStorage.setItem('news_like_'+id,'1'); }catch{}
    }

    async function loadMore(){
      moreBtn.disabled = true;
      try{
        let base = query(collection(db,'news'), orderBy('createdAt','desc'), limit(pageSize));
        if(lastDoc) base = query(collection(db,'news'), orderBy('createdAt','desc'), startAfter(lastDoc), limit(pageSize));
        const snap = await getDocs(base);
        if(!snap.empty){
          lastDoc = snap.docs[snap.docs.length-1];
          const arr = snap.docs.map(d=> ({ id:d.id, ...d.data() }))
                               .filter(n=> n.status==='published' && !n.__deleted);
          cache.push(...arr);
          render();
          observeViews(arr.map(x=>x.id));
        }
        moreBtn.classList.toggle('hidden', snap.size < pageSize);
        emptyEl.classList.toggle('hidden', cache.length>0);
      }catch(e){
        console.error(e);
        errEl.textContent='–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–µ–Ω—Ç—ã. –ü—Ä–æ–≤–µ—Ä—å firebase-config.js –∏ –¥–æ—Å—Ç—É–ø—ã.';
        errEl.classList.remove('hidden');
      }finally{
        moreBtn.disabled = false;
      }
    }

    function render(list = cache){
      // pinned
      const pinned = list.filter(n=>n.pinned===true);
      if(pinned.length){
        pinEl.innerHTML = pinned.map(card).join('');
        pinWrap.classList.remove('hidden');
      }else{
        pinWrap.classList.add('hidden');
      }
      // feed
      const items = list.filter(n=>!n.pinned);
      feedEl.innerHTML = items.map(card).join('');

      // likes
      document.querySelectorAll('[data-like]').forEach(btn=>{
        btn.onclick = async ()=>{
          const id = btn.dataset.like;
          if(liked(id)) return;
          try{
            await updateDoc(doc(db,'news',id), { likes: increment(1) });
            btn.setAttribute('aria-pressed','true');
            const span = btn.querySelector('.like-count');
            span.textContent = String((+span.textContent||0)+1);
            markLiked(id);
          }catch(e){ /* ignore */ }
        };
      });

      // open article
      document.querySelectorAll('[data-open]').forEach(btn=>{
        btn.onclick = ()=>{
          const id = btn.dataset.open;
          const n = cache.find(x=>x.id===id);
          if(!n) return;
          openArticle(n);
        };
      });

      // –æ—Ç–∫—Ä—ã—Ç—å –ø–æ –∫–ª–∏–∫—É –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É (–∫—Ä–æ–º–µ –∫–Ω–æ–ø–æ–∫)
      document.querySelectorAll('article.card').forEach(cardEl=>{
        cardEl.onclick = (e)=>{
          const isControl = e.target.closest('button,[data-like]');
          if(isControl) return;
          const id = cardEl.getAttribute('data-id');
          const n = cache.find(x=>x.id===id);
          if(n) openArticle(n);
        };
      });
    }

function openArticle(n){
  // –∑–∞–ø–æ–º–∏–Ω–∞–µ–º –∏–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–π
  currentIndex = cache.findIndex(x => x.id === n.id);

  // –æ–±–ª–æ–∂–∫–∞
  if(n.cover){
    mCover.src = n.cover;
    mCover.classList.remove('hidden');
  }else{
    mCover.classList.add('hidden');
    mCover.src='';
  }

  mTitle.textContent = n.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';
  mMeta.textContent  = (n.createdAt || '') + (n.pinned ? ' ‚Ä¢ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–æ' : '');
  mContent.innerHTML = (n.html || '');

  // share-—Å—Å—ã–ª–∫–∏
  const shareUrl = `${location.origin}${location.pathname}?id=${encodeURIComponent(n.id)}`;
  aShareTG.href = `https://t.me/share/url?url=${encodeURIComponent(shareUrl)}&text=${encodeURIComponent(n.title||'')}`;
  aShareVK.href = `https://vk.com/share.php?url=${encodeURIComponent(shareUrl)}&title=${encodeURIComponent(n.title||'')}`;
  btnShareCopy.onclick = async ()=>{
    try{
      await navigator.clipboard.writeText(shareUrl);
      btnShareCopy.textContent='–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ';
      setTimeout(()=>btnShareCopy.textContent='–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É',1200);
    }catch{}
  };

  // –ø–æ–∫–∞–∑–∞—Ç—å –∏ –ø—Ä–æ—Å–∫—Ä–æ–ª–ª–∏—Ç—å –≤–≤–µ—Ä—Ö
  overlay.classList.remove('hidden');
  document.querySelector('.article-scroll')?.scrollTo({top:0,behavior:'instant'});
}


    // –ü—Ä–æ—Å–º–æ—Ç—Ä—ã: –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç –æ–¥–∏–Ω —Ä–∞–∑, –∫–æ–≥–¥–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –≤–æ –≤—å—é–ø–æ—Ä—Ç–µ
    function observeViews(ids){
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(async (ent)=>{
          if(ent.isIntersecting){
            const art = ent.target;
            const id = art.getAttribute('data-id');
            if(id && !seenOnce.has(id)){
              seenOnce.add(id);
              try{
                await updateDoc(doc(db,'news',id), { views: increment(1) });
                const el = art.querySelector('.view-count');
                if(el) el.textContent = String((+el.textContent||0)+1);
              }catch(e){}
            }
            io.unobserve(art);
          }
        });
      },{threshold:0.3});
      ids.forEach(id=>{
        const el = document.querySelector(`[data-id="${id}"]`);
        if(el) io.observe(el);
      });
    }

    // –ü–æ–∏—Å–∫
    qInput.addEventListener('input', ()=>{
      const q=(qInput.value||'').toLowerCase();
      const list = !q ? cache : cache.filter(n => (n.title||'').toLowerCase().includes(q));
      render(list);
      moreBtn.classList.toggle('hidden', !!q);
      emptyEl.classList.toggle('hidden', list.length>0);
    });
    clearBtn.addEventListener('click', ()=>{ qInput.value=''; render(cache); moreBtn.classList.toggle('hidden', cache.length<pageSize); });

    moreBtn.addEventListener('click', loadMore);
function openByIndex(delta){
  if(!cache.length) return;
  if(currentIndex < 0) currentIndex = 0;
  currentIndex = (currentIndex + delta + cache.length) % cache.length;
  openArticle(cache[currentIndex]);
}

btnPrev?.addEventListener('click', ()=> openByIndex(-1));
btnNext?.addEventListener('click', ()=> openByIndex(1));

document.addEventListener('keydown', (e)=>{
  if(overlay.classList.contains('hidden')) return;
  if(e.key === 'ArrowLeft')  openByIndex(-1);
  if(e.key === 'ArrowRight') openByIndex(1);
});

    // START
    await loadMore();
  </script>
<!-- –õ–µ–≤—ã–π –±–æ–∫–æ–≤–æ–π –±–∞–Ω–Ω–µ—Ä -->
<div class="ad-left">
<script type="text/javascript">
	atOptions = {
		'key' : '4cfa40489284c0efa9eb342e77152cdc',
		'format' : 'iframe',
		'height' : 300,
		'width' : 160,
		'params' : {}
	};
</script>
<script src="//www.highperformanceformat.com/4cfa40489284c0efa9eb342e77152cdc/invoke.js" type="text/javascript"></script>
</div>
<!-- –ü—Ä–∞–≤—ã–π –±–æ–∫–æ–≤–æ–π –±–∞–Ω–Ω–µ—Ä -->
<div class="ad-right">
<script type="text/javascript">
	atOptions = {
		'key' : '766301ab751df8665553f47e1f05709a',
		'format' : 'iframe',
		'height' : 600,
		'width' : 160,
		'params' : {}
	};
</script>
<script src="//www.highperformanceformat.com/766301ab751df8665553f47e1f05709a/invoke.js" type="text/javascript"></script>
</div>
</body>
</html>
