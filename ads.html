<!DOCTYPE html>

<html lang="ru">
<head>
  <link rel="stylesheet" href="css/mobile-fixes.css?v=1">

<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>–†–µ–∫–ª–∞–º–∞ - –ù–∞ –¢–û–ü—á–∞–Ω–µ</title>
<!-- SEO -->
<meta content="–í–∏—Ç—Ä–∏–Ω–∞ –ø–ª–∞—Ç–Ω—ã—Ö —Ä–∞–∑–º–µ—â–µ–Ω–∏–π –∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø—Ä–æ–µ–∫—Ç–∞ ¬´–ù–∞ –¢–û–ü—á–∞–Ω–µ¬ª. –õ–µ–Ω—Ç–∞ —Ä–µ–∫–ª–∞–º —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏, –ª–∞–π–∫–∞–º–∏, –ø—Ä–æ—Å–º–æ—Ç—Ä–∞–º–∏ –∏ —à–∞—Ä–∏–Ω–≥–æ–º." name="description"/>
<link href="https://natopchane.github.io/natopchane/ads.html" rel="canonical"/>
<meta content="website" property="og:type"/>
<meta content="–†–µ–∫–ª–∞–º–∞ ‚Äî –ù–∞ –¢–û–ü—á–∞–Ω–µ" property="og:title"/>
<meta content="–õ–µ–Ω—Ç–∞ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ –ø—Ä–æ–µ–∫—Ç–∞ ¬´–ù–∞ –¢–û–ü—á–∞–Ω–µ¬ª." property="og:description"/>
<meta content="https://natopchane.github.io/natopchane/ads.html" property="og:url"/>
<meta content="https://natopchane.github.io/natopchane/images/rec%20ic.svg" property="og:image"/>
<meta content="#e7e0d1" name="theme-color"/>
<!-- Favicon -->
<link href="images/rec%20ic.svg" rel="icon" type="image/svg+xml"/>
<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>
<!-- –û–±—â–∏–µ —Å—Ç–∏–ª–∏ —Å–∞–π—Ç–∞ -->
<link href="css/style.css" rel="stylesheet"/>
<style>
    /* –û—Ç–ª–∏—á–∏–µ –æ—Ç news: —Ç—ë–ø–ª–∞—è —Å–≤–µ—Ç–ª–æ-–±–µ–∂ —Ñ–æ–Ω–æ–≤–∞—è —Ç–µ–º–∞ –∏ –º—è–≥–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    html{ background:#f7f3ec; }
    main{ padding-bottom:72px; } /* –∑–∞–ø–∞—Å –ø–æ–¥ —Ñ–∏–∫—Å-–ø–æ–¥–≤–∞–ª */
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.06)}
    .btn{display:inline-flex;align-items:center;gap:6px;border:1px solid #e5e7eb;border-radius:12px;padding:8px 12px;font-weight:600}
    .btn-ghost{background:#fff}
    .btn-like[aria-pressed="true"]{border-color:#fb7185;background:#fff1f2}
    .ads-wrap{max-width:820px;margin:0 auto}
    .article-modal{max-width:880px;width:100%}
    .article-scroll{max-height:80vh;overflow:auto}
    .article-cover{width:100%;height:340px;object-fit:cover;border-bottom:1px solid #e5e7eb;border-top-left-radius:16px;border-top-right-radius:16px}
  </style>
<style>header nav a.active{border-bottom:2px solid currentColor}</style>
<style>
.ad-left, .ad-right {
    position: fixed;
    top: 100px;
    z-index: 9999;
}
.ad-left {
    left: 10px;
}
.ad-right {
    right: 10px;
}
</style>
<style>
/* === Mobile off-canvas menu + ad hide (inject) === */
@media (max-width:768px){
  /* Off-canvas menu */
  #menu{
    position:fixed!important; top:0; left:0;
    height:100vh; width:86vw; max-width:360px;
    background:#fff; box-shadow:2px 0 24px rgba(0,0,0,.18);
    transform:translateX(-100%); transition:transform .3s ease;
    z-index:100001; overflow-y:auto; padding:0;
  }
  #menu.open{ transform:translateX(0); }

  /* Backdrop */
  #menu-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.45); z-index:100000; }

  /* Menu header + list styling (safe if not present) */
  #menu .m-menu-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;font:700 16px/1.2 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;border-bottom:1px solid #e5e7eb}
  #menu .m-menu-close{width:32px;height:32px;border-radius:10px;border:1px solid #e5e7eb;background:#fff;font-size:18px;line-height:30px;color:#475569}
  #menu .m-menu{list-style:none;margin:0;padding:8px 0}
  #menu .m-menu a{display:block;padding:14px 16px;text-decoration:none;color:#0f172a;font-weight:600;border-bottom:1px solid #e5e7eb}
  #menu .m-menu li:last-child a{border-bottom:none}

  /* Hide side ads on mobile */
  .ad-left, .ad-right, .side-ad, .ad-sticky, .ad-sidebar { display:none!important; }
  iframe[src*="highperformanceformat.com"] { display:none!important; }
}
@media (min-width:768px){
  #menu-backdrop{ display:none!important; }
}
</style>
</head>
<body class="text-gray-900">
<header class="border-b border-gray-200 bg-white">
<div id=\"menu-backdrop\" class=\"hidden\"></div>
<style>
    header nav a.active{ border-bottom:2px solid currentColor; padding-bottom:2px; }
  </style>
<div class="w-full px-2 flex justify-between items-center h-16">
<a class="flex items-center gap-2 text-xl font-semibold" href="index.html">
<img alt="–ù–∞ –¢–û–ü—á–∞–Ω–µ" class="h-8 w-8 object-contain" src="images/logo.png"/> –ù–∞ –¢–û–ü—á–∞–Ω–µ
    </a>
<nav class="hidden md:flex md:flex-1 justify-center items-center gap-8 whitespace-nowrap">
<a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
<a href="news.html">–ù–æ–≤–æ—Å—Ç–∏</a>
<a href="ads.html">–†–µ–∫–ª–∞–º–∞</a>
<a href="videos.html">–í–∏–¥–µ–æ</a>
<a href="gallery.html">–ì–∞–ª–µ—Ä–µ—è</a>
<a href="biographies.html">–ë–∏–æ–≥—Ä–∞—Ñ–∏–∏</a>
<a href="music.html">–ú—É–∑—ã–∫–∞</a>
<a href="entertainment.html">–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</a>
<a href="products.html">–ü—Ä–æ–¥—É–∫—Ü–∏—è</a>
<a href="about.html">–û¬†–Ω–∞—Å</a>
<a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
</nav>
<button aria-label="–ú–µ–Ω—é" class="md:hidden p-2 text-gray-700 text-2xl" id="menu-btn">‚ò∞</button>
</div>
\1
  <div class="m-menu-head">–ú–µ–Ω—é <button id="menuClose" class="m-menu-close" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button></div>

<a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
<a href="news.html">–ù–æ–≤–æ—Å—Ç–∏</a>
<a href="ads.html">–†–µ–∫–ª–∞–º–∞</a>
<a href="videos.html">–í–∏–¥–µ–æ</a>
<a href="gallery.html">–ì–∞–ª–µ—Ä–µ—è</a>
<a href="biographies.html">–ë–∏–æ–≥—Ä–∞—Ñ–∏–∏</a>
<a href="music.html">–ú—É–∑—ã–∫–∞</a>
<a href="entertainment.html">–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</a>
<a href="products.html">–ü—Ä–æ–¥—É–∫—Ü–∏—è</a>
<a href="about.html">–û –Ω–∞—Å</a>
<a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
</div>
<script>
    // –±—É—Ä–≥–µ—Ä
    document.getElementById('menu-btn')
      ?.addEventListener('click', ()=> document.getElementById('menu')?.classList.toggle('hidden'));

    // –∞–≤—Ç–æ-–∞–∫—Ç–∏–≤–Ω—ã–π –ø—É–Ω–∫—Ç (—Ä–∞–±–æ—Ç–∞–µ—Ç –∏ —Å "index.html", –∏ —Å "/")
    (function(){
      const norm = p => {
        try { p = new URL(p, location.href).pathname; } catch(e){}
        if (p === '/' || p === '' || /\/index\.html$/i.test(p)) return 'index.html';
        return p.split('/').pop(); // –±–µ—Ä—ë–º –∏–º—è —Ñ–∞–π–ª–∞
      };
      const cur = norm(location.pathname);
      document.querySelectorAll('header nav a, #menu a').forEach(a=>{
        const href = norm(a.getAttribute('href') || '');
        if (href.toLowerCase() === cur.toLowerCase()) {
          a.classList.add('active'); a.setAttribute('aria-current','page');
        } else {
          a.classList.remove('active'); a.removeAttribute('aria-current');
        }
      });
    })();
  </script>
</header>
<!-- HERO ‚Äî REC + –ª–æ–≥–æ—Ç–∏–ø + –∑–∞–≥–æ–ª–æ–≤–æ–∫ -->
<section class="bg-white border-b">
<div class="max-w-7xl mx-auto px-2 ads-hero flex items-center gap-3">
<img alt="–ù–∞ –¢–û–ü—á–∞–Ω–µ" class="logo" src="images/rec ic.svg logo.svg"/>
<h1>–†–ï–ö–õ–ê–ú–ê –ù–ê –¢–û–ü—á–∞–Ω–µ</h1>
</div>
</section>
<!-- –õ—ë–≥–∫–∏–π –ø—Ä–µ–º–∏—É–º-–∞–∫—Ü–µ–Ω—Ç -->
<section class="border-b" style="background:linear-gradient(180deg,#f2ede3, #f7f3ec)">
<div class="max-w-7xl mx-auto px-4 py-4 flex flex-wrap items-center gap-3">
<span class="inline-flex items-center gap-2 text-xs font-semibold tracking-widest uppercase rounded-full border px-3 py-1 bg-white">–í–∏—Ç—Ä–∏–Ω–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏–π</span>
<span class="text-sm text-gray-600">–í—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è</span>
</div>
</section>
<!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ -->
<main class="max-w-7xl mx-auto px-4 py-6">
<div class="ads-wrap space-y-6" id="ads-feed"></div>
<div class="hidden text-sm text-gray-500 text-center" id="ads-empty">–ü–æ–∫–∞ –ø—É—Å—Ç–æ</div>
<div class="hidden text-sm text-red-600 mt-2 text-center" id="ads-err"></div>
<div class="flex justify-center my-6">
<button class="btn btn-ghost" id="ads-more">–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë</button>
</div>
</main>
<!-- –ü–û–î–í–ê–õ (1:1 –∫–∞–∫ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π/–Ω–æ–≤–æ—Å—Ç—è—Ö) -->
<footer class="fixed bottom-0 left-0 w-full border-t border-gray-200 bg-white">
<div class="max-w-7xl mx-auto px-4 py-2 text-xs text-gray-500 flex flex-col md:flex-row justify-between items-center gap-2">
<p>¬© 2025 –ù–∞ –¢–û–ü—á–∞–Ω–µ. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
<ul class="soc-row">
<li><a aria-label="VK" href="https://vk.com/natopchane" target="_blank"><img alt="VK" src="images/soc/vk.svg"/></a></li>
<li><a aria-label="Telegram" href="https://t.me/na_topchane" target="_blank"><img alt="Telegram" src="images/soc/telegram.svg"/></a></li>
<li><a aria-label="Instagram" href="https://www.instagram.com/natopchane/" target="_blank"><img alt="Instagram" src="images/soc/instagram.svg"/></a></li>
<li><a aria-label="TikTok" href="https://www.tiktok.com/@natopchane" target="_blank"><img alt="TikTok" src="images/soc/tik-tok.svg"/></a></li>
<li><a aria-label="Pinterest" href="https://www.pinterest.com/natopchane/?invite_code=67d18b04667e4a56b03fb7432127235b&amp;sender=1144266355231499314" target="_blank"><img alt="Pinterest" src="images/soc/pinterest.svg"/></a></li>
<li><a aria-label="Rutube" href="https://rutube.ru/channel/49549724/" target="_blank"><img alt="Rutube" src="images/soc/rutube.svg"/></a></li>
<li><a aria-label="Facebook" href="https://www.facebook.com/groups/natopchane/" target="_blank"><img alt="Facebook" src="images/soc/fb.svg"/></a></li>
<li><a aria-label="Dzen" href="https://dzen.ru/natopchane" target="_blank"><img alt="Dzen" src="images/soc/yandex.svg"/></a></li>
<li><a aria-label="YouTube" href="https://www.youtube.com/@natopchane" target="_blank"><img alt="YouTube" src="images/soc/youtube.svg"/></a></li>
<li><a aria-label="OK" href="https://ok.ru/group/70000013841187" target="_blank"><img alt="OK" src="images/soc/ok.svg"/></a></li>
</ul>
<div class="flex flex-wrap gap-3">
<button class="hover:underline" id="terms-btn">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</button>
<button class="hover:underline" id="support-btn">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>
<button class="hover:underline" id="cooperation-btn">–°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ</button>
<button class="hover:underline" id="privacy-btn">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</button>
</div>
</div>
</footer>
<!-- –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–ê–Ø –ú–û–î–ê–õ–ö–ê -->
<div class="fixed inset-0 bg-black/50 hidden z-50 flex items-center justify-center p-4" id="modal-overlay">
<button aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∞—è" class="absolute left-4 md:left-6 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white rounded-full w-9 h-9 flex items-center justify-center shadow" id="prev-article">‚Äπ</button>
<button aria-label="–°–ª–µ–¥—É—é—â–∞—è" class="absolute right-4 md:right-6 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white rounded-full w-9 h-9 flex items-center justify-center shadow" id="next-article">‚Ä∫</button>
<div class="bg-white article-modal w-full max-w-[880px] p-0 rounded-2xl relative shadow-lg" id="modal-box">
<button aria-label="–ó–∞–∫—Ä—ã—Ç—å" class="absolute top-3 right-3 text-gray-500 hover:text-gray-700 text-2xl leading-none" id="modal-close">√ó</button>
<div class="article-scroll">
<img alt="" class="article-cover hidden" id="article-cover"/>
<div class="p-6">
<h2 class="text-2xl font-bold mb-1" id="modal-title"></h2>
<div class="flex flex-wrap items-center gap-3 mb-4">
<div class="text-xs text-gray-500" id="modal-meta"></div>
<div class="ml-auto flex items-center gap-2 text-xs">
<button class="btn btn-ghost py-1 px-2" id="share-copy">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
<a class="btn btn-ghost py-1 px-2" id="share-tg" rel="noopener" target="_blank">TG</a>
<a class="btn btn-ghost py-1 px-2" id="share-vk" rel="noopener" target="_blank">VK</a>
</div>
</div>
<div class="prose text-gray-800" id="modal-content"></div>
</div>
</div>
</div>
</div>
<!-- FIREBASE + –õ–û–ì–ò–ö–ê -->
<script type="module">
    // ===== Firebase =====
    import { firebaseConfig } from './firebase-config.js';
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js';
    import {
      getFirestore, collection, getDocs, query, orderBy, limit, startAfter,
      doc, updateDoc, increment
    } from 'https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js';

    const app = initializeApp(firebaseConfig);
    const db  = getFirestore(app);

    // ===== Helpers / DOM =====
    const $ = (s,r=document)=>r.querySelector(s);
    const feedEl = $('#ads-feed'), emptyEl = $('#ads-empty'), errEl = $('#ads-err'), moreBtn = $('#ads-more');

    // –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
    document.getElementById('menu-btn').addEventListener('click', () => {
      document.getElementById('menu').classList.toggle('hidden');
    });

    // –ú–æ–¥–∞–ª–∫–∏ (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è)
    const modal = document.getElementById('modal-overlay');
    const title = document.getElementById('modal-title');
    const content = document.getElementById('modal-content');

    // --- –ê–õ–ò–ê–°–´, —á—Ç–æ–±—ã –¥–∞–ª—å—à–µ –∫–æ–¥ –Ω–µ –ø–∞–¥–∞–ª ---
const overlay = modal;
const mTitle = title;
const mContent = content;
const mMeta = document.getElementById('modal-meta');
const mCover = document.getElementById('article-cover');
const aShareTG = document.getElementById('share-tg');
const aShareVK = document.getElementById('share-vk');
const btnShareCopy = document.getElementById('share-copy');

// --- –ó–ê–ö–†–´–¢–ò–ï –ú–û–î–ê–õ–ö–ò ---
const closeBtn = document.getElementById('modal-close');
if (closeBtn) closeBtn.onclick = () => overlay.classList.add('hidden');

// –∫–ª–∏–∫ –ø–æ —Ñ–æ–Ω—É
overlay.addEventListener('click', (e) => {
  if (e.target === overlay) overlay.classList.add('hidden');
});

// Esc
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') overlay.classList.add('hidden');
});

    document.getElementById('privacy-btn').onclick = () => {
      title.textContent = '–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏';
      content.innerHTML = `
        <p>–ú—ã —É–≤–∞–∂–∞–µ–º –≤–∞—à—É –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å–∞–π—Ç–∞ ¬´–ù–∞ –¢–û–ü—á–∞–Ω–µ¬ª –º—ã –º–æ–∂–µ–º —Å–æ–±–∏—Ä–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: IP-–∞–¥—Ä–µ—Å, cookie, email (–ø—Ä–∏ –ø–æ–¥–ø–∏—Å–∫–µ –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É).</p>
        <p>–î–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å–∞–π—Ç–∞, –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ—Å–µ—â–µ–Ω–∏–π.</p>
        <p>–ú—ã –Ω–µ –ø–µ—Ä–µ–¥–∞—ë–º –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º, –∫—Ä–æ–º–µ —Å–ª—É—á–∞–µ–≤, –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö –∑–∞–∫–æ–Ω–æ–º.</p>
        <p>–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø–∏—Å–∞–≤ –Ω–∞–º –Ω–∞ support@example.com.</p>
        <p>–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª–∏—Ç–∏–∫–∏ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.</p>
      `;
      modal.classList.remove('hidden');
    };

    document.getElementById('terms-btn').onclick = () => {
      title.textContent = '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ';
      content.innerHTML = `
        <p>–ò—Å–ø–æ–ª—å–∑—É—è —Å–∞–π—Ç ¬´–ù–∞ –¢–û–ü—á–∞–Ω–µ¬ª, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏:</p>
        <ul class="list-disc pl-5 space-y-1">
          <li>–ù–µ —Ä–∞–∑–º–µ—â–∞—Ç—å –Ω–µ–∑–∞–∫–æ–Ω–Ω—ã–π –∏–ª–∏ –æ—Å–∫–æ—Ä–±–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç.</li>
          <li>–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∞–π—Ç –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏ —Å–ø–∞–º–∞ –∏–ª–∏ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞.</li>
          <li>–°–æ–±–ª—é–¥–∞—Ç—å –∞–≤—Ç–æ—Ä—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –Ω–∞ –ø—É–±–ª–∏–∫—É–µ–º—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª.</li>
          <li>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.</li>
        </ul>
        <p>–ü—Ä–∏ –Ω–µ—Å–æ–≥–ª–∞—Å–∏–∏ —Å —É—Å–ª–æ–≤–∏—è–º–∏ –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∞–π—Ç–∞.</p>
      `;
      modal.classList.remove('hidden');
    };

    document.getElementById('support-btn').onclick = () => {
      title.textContent = '–ü–æ–¥–¥–µ—Ä–∂–∫–∞';
      content.innerHTML = `
        <p>–ü–æ –ª—é–±—ã–º –≤–æ–ø—Ä–æ—Å–∞–º –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–∞–º:</p>
        <p class="flex items-center gap-2">
          <img src="images/telegram.svg" alt="Telegram" class="w-5 h-5">
          <a href="https://t.me/levakand_pro" target="_blank" class="text-blue-600 hover:underline">–ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram</a>
        </p>
      `;
      modal.classList.remove('hidden');
    };

    document.getElementById('cooperation-btn').onclick = () => {
      title.textContent = '–°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–∫–ª–∞–º–∞';
      content.innerHTML = `
        <p>–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º —Ä–µ–∫–ª–∞–º—ã –∏ —Å–æ–≤–º–µ—Å—Ç–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏:</p>
        <p class="flex items-center gap-2">
          <img src="images/telegram.svg" alt="Telegram" class="w-5 h-5">
          <a href="https://t.me/levakand_pro" target="_blank" class="text-blue-600 hover:underline">Telegram</a>
        </p>
        <p class="flex items-center gap-2">
          <img src="images/gmail.svg" alt="Gmail" class="w-5 h-5">
          <a href="mailto:natopchane@gmail.com" class="text-red-600 hover:underline">natopchane@gmail.com</a>
        </p>
      `;
      modal.classList.remove('hidden');
    };

    // ===== –õ–µ–Ω—Ç–∞ / –ø–µ–π–¥–∂–∏–Ω–≥ =====
    const pageSize = 12;
    let lastDoc = null;
    let cache = [];
    let currentIndex = -1;

    const esc = s => (s||'').toString().replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;');
    const cut = (t,max=260)=>{t=(t||'').toString().replace(/\s+/g,' ').trim();return t.length<=max?esc(t):esc(t.slice(0,max))+'‚Ä¶';}

    const liked = id => { try{return localStorage.getItem('ads_like_'+id)==='1'}catch{return false} };
    const markLiked = id => { try{localStorage.setItem('ads_like_'+id,'1')}catch{} };

    const card = (a)=>`
      <article class="card overflow-hidden" data-id="${a.id}">
        ${a.cover?`<img loading="lazy" src="${esc(a.cover)}" class="w-full h-56 object-cover border-b">`:''}
        <div class="p-5 space-y-3">
          <div class="flex items-start gap-2">
            <span class="inline-flex items-center gap-2 text-[10px] font-semibold tracking-widest uppercase rounded-full border px-2 py-0.5 bg-[#fff8]">Ad</span>
            <h3 class="font-bold text-lg leading-tight">${esc(a.title||'–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è')}</h3>
          </div>
          ${a.desc?`<p class="text-sm text-gray-800">${cut(a.desc, 260)}</p>`:''}
          <div class="flex items-center justify-between">
            <button class="btn btn-ghost read-more" data-open="${a.id}">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
            <div class="flex items-center gap-4 text-xs text-gray-600">
              <button class="btn btn-ghost btn-like" data-like="${a.id}" aria-pressed="${liked(a.id)}">‚ù§Ô∏è <span class="like-count">${a.likes||0}</span></button>
              <span class="inline-flex items-center gap-1">üëÅ <span class="view-count">${a.views||0}</span></span>
            </div>
          </div>
        </div>
      </article>`;

    function render(list = cache){
      feedEl.innerHTML = list.map(card).join('');
    }

async function loadMore(){
  moreBtn.disabled = true;
  try {
    let q = query(collection(db, 'ads'), orderBy('createdAt', 'desc'), limit(pageSize));
    if (lastDoc) {
      q = query(collection(db, 'ads'), orderBy('createdAt', 'desc'), startAfter(lastDoc), limit(pageSize));
    }

    const snap = await getDocs(q);

    if (!snap.empty) {
      lastDoc = snap.docs[snap.docs.length - 1];
const arr = snap.docs
  .map(d => ({ id: d.id, ...d.data() }))
  .filter(a => (a.status || 'published') === 'published' && !a.__deleted);


      cache = cache.concat(arr);
      render();
      emptyEl.classList.add('hidden');
      moreBtn.classList.toggle('hidden', snap.size < pageSize);
    } else {
      if (!cache.length) emptyEl.classList.remove('hidden');
      moreBtn.classList.add('hidden');
    }
  } catch (e) {
    console.error(e);
    errEl.textContent = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏—Ç—Ä–∏–Ω—ã. –ü—Ä–æ–≤–µ—Ä—å firebase-config.js –∏ –¥–æ—Å—Ç—É–ø—ã.';
    errEl.classList.remove('hidden');
  } finally {
    moreBtn.disabled = false;
  }
}

    // –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–∫–æ–≤ (–∫–∞—Ä—Ç–æ—á–∫–∏ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)
    document.addEventListener('click', async (e)=>{
      // –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
      const openBtn = e.target.closest('[data-open]');
      if(openBtn){
        openAd(openBtn.dataset.open);
        return;
      }
      // –õ–∞–π–∫
      const likeBtn = e.target.closest('[data-like]');
      if(likeBtn){
        const id = likeBtn.dataset.like;
        if(liked(id)) return;
        try{
          await updateDoc(doc(db,'ads',id), { likes: increment(1) });
          likeBtn.setAttribute('aria-pressed','true');
          likeBtn.querySelector('.like-count').textContent =
            String((+likeBtn.querySelector('.like-count').textContent||0)+1);
          markLiked(id);
        }catch(err){ console.warn('like++ fail', err?.code||err?.message||err); }
      }
    });

    // –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
    async function incViewsSafe(id){
      try{ await updateDoc(doc(db,'ads', id), { views: increment(1) }); }
      catch(e){ console.warn('views++ fail', e?.code||e?.message||e); }
    }

    function openAd(id){
      if(!id) return;
      const idx = cache.findIndex(x=>x.id===id);
      if(idx<0) return;
      currentIndex = idx;

      const a = cache[idx] || {};
      mTitle.textContent = a.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';
      mMeta.textContent  = (a.createdAt || '').toString().slice(0,10);
      mContent.innerHTML = esc(a.desc || '');

      if(a.cover){ mCover.src = a.cover; mCover.classList.remove('hidden'); }
      else { mCover.classList.add('hidden'); mCover.src=''; }

      const url = location.origin + location.pathname + '#ad=' + encodeURIComponent(id);
      if (aShareTG) aShareTG.href = 'https://t.me/share/url?url=' + encodeURIComponent(url) + '&text=' + encodeURIComponent(a.title||'');
      if (aShareVK) aShareVK.href = 'https://vk.com/share.php?url=' + encodeURIComponent(url);
      if (btnShareCopy) btnShareCopy.onclick = async ()=>{
        try{ await navigator.clipboard.writeText(url);
             btnShareCopy.textContent='–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ';
             setTimeout(()=>btnShareCopy.textContent='–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É',1500);
        }catch{}
      };

      overlay.classList.remove('hidden');
      incViewsSafe(id);
    }

    function openByOffset(off){
      if(!cache.length) return;
      if(currentIndex<0) currentIndex = 0;
      currentIndex = (currentIndex + off + cache.length) % cache.length;
      openAd(cache[currentIndex].id);
    }
    $('#prev-article').onclick = ()=> openByOffset(-1);
    $('#next-article').onclick = ()=> openByOffset(1);

    // –•—ç—à-–¥–æ—Å—Ç—É–ø #ad=ID
    function openFromHash(){
      const m = location.hash.match(/ad=([^&]+)/);
      if(m){ const id = decodeURIComponent(m[1]); const t = setInterval(()=>{
          if(cache.length){ clearInterval(t); openAd(id); }
        },100); setTimeout(()=>clearInterval(t), 5000);
      }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    moreBtn.onclick = loadMore;
    await loadMore();
    openFromHash();
  </script>
<script>
(function(){
  ['terms-btn','support-btn','cooperation-btn','privacy-btn','menu-btn'].forEach(id=>{
    const el = document.getElementById(id);
    if(!el) return;
    const clone = el.cloneNode(true);
    el.parentNode.replaceChild(clone, el);
  });
  const modal=document.getElementById('modal-overlay');
  const title=document.getElementById('modal-title');
  const meta=document.getElementById('modal-meta');
  const content=document.getElementById('modal-content');
  const cover=document.getElementById('article-cover');
  function show(t,html){
    if(!modal||!title||!content) return;
    title.textContent=t; if(meta) meta.textContent='';
    if(cover){ cover.classList.add('hidden'); cover.src=''; }
    content.innerHTML=html; modal.classList.remove('hidden');
  }
  const TERMS=`<p>–ò—Å–ø–æ–ª—å–∑—É—è —Å–∞–π—Ç ¬´–ù–∞ –¢–û–ü—á–∞–Ω–µ¬ª, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏:</p>
  <ul class="list-disc pl-5 space-y-1">
    <li>–ù–µ —Ä–∞–∑–º–µ—â–∞—Ç—å –Ω–µ–∑–∞–∫–æ–Ω–Ω—ã–π –∏–ª–∏ –æ—Å–∫–æ—Ä–±–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç.</li>
    <li>–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∞–π—Ç –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏ —Å–ø–∞–º–∞ –∏–ª–∏ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞.</li>
    <li>–°–æ–±–ª—é–¥–∞—Ç—å –∞–≤—Ç–æ—Ä—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –Ω–∞ –ø—É–±–ª–∏–∫—É–µ–º—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª.</li>
    <li>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.</li>
    <li>–ü—Ä–∏ –Ω–µ—Å–æ–≥–ª–∞—Å–∏–∏ —Å —É—Å–ª–æ–≤–∏—è–º–∏ –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∞–π—Ç–∞.</li>
  </ul>`;
  const SUPPORT=`<p>–ü–æ –ª—é–±—ã–º –≤–æ–ø—Ä–æ—Å–∞–º –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–∞–º:</p>
  <p class="flex items-center gap-2">
    <img src="images/soc/telegram.svg" alt="Telegram" class="w-5 h-5">
    <a href="https://t.me/levakand_pro" target="_blank" class="text-blue-600 hover:underline">–ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram</a>
  </p>`;
  const COOP=`<p>–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º —Ä–µ–∫–ª–∞–º—ã –∏ —Å–æ–≤–º–µ—Å—Ç–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏:</p>
  <p class="flex items-center gap-2">
    <img src="images/soc/telegram.svg" alt="Telegram" class="w-5 h-5">
    <a href="https://t.me/levakand_pro" target="_blank" class="text-blue-600 hover:underline">Telegram</a>
  </p>
  <p class="flex items-center gap-2">
    <img src="images/soc/gmail.svg" alt="Gmail" class="w-5 h-5">
    <a href="mailto:natopchane@gmail.com" class="text-red-600 hover:underline">natopchane@gmail.com</a>
  </p>`;
  const PRIV=`<p>–ú—ã —É–≤–∞–∂–∞–µ–º –≤–∞—à—É –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å–∞–π—Ç–∞ ¬´–ù–∞ –¢–û–ü—á–∞–Ω–µ¬ª –º—ã –º–æ–∂–µ–º —Å–æ–±–∏—Ä–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: IP-–∞–¥—Ä–µ—Å, cookie, email (–ø—Ä–∏ –ø–æ–¥–ø–∏—Å–∫–µ –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É).</p>
  <p>–î–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å–∞–π—Ç–∞, –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ—Å–µ—â–µ–Ω–∏–π.</p>
  <p>–ú—ã –Ω–µ –ø–µ—Ä–µ–¥–∞—ë–º –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º, –∫—Ä–æ–º–µ —Å–ª—É—á–∞–µ–≤, –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö –∑–∞–∫–æ–Ω–æ–º.</p>
  <p>–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø–∏—Å–∞–≤ –Ω–∞–º –Ω–∞ <a class="text-red-600 hover:underline" href="mailto:natopchane@gmail.com">natopchane@gmail.com</a>.</p>
  <p>–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª–∏—Ç–∏–∫–∏ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.</p>`;
  document.getElementById('terms-btn')?.addEventListener('click', ()=> show('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ', TERMS));
  document.getElementById('support-btn')?.addEventListener('click', ()=> show('–ü–æ–¥–¥–µ—Ä–∂–∫–∞', SUPPORT));
  document.getElementById('cooperation-btn')?.addEventListener('click', ()=> show('–°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–∫–ª–∞–º–∞', COOP));
  document.getElementById('privacy-btn')?.addEventListener('click', ()=> show('–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏', PRIV));
  document.getElementById('menu-btn')?.addEventListener('click', ()=>{
    document.getElementById('menu')?.classList.toggle('hidden');
  });
})();
</script>
<!-- –õ–µ–≤—ã–π –±–æ–∫–æ–≤–æ–π –±–∞–Ω–Ω–µ—Ä -->
<div class="ad-left">
<script type="text/javascript">
	atOptions = {
		'key' : '4cfa40489284c0efa9eb342e77152cdc',
		'format' : 'iframe',
		'height' : 300,
		'width' : 160,
		'params' : {}
	};
</script>
<script src="//www.highperformanceformat.com/4cfa40489284c0efa9eb342e77152cdc/invoke.js" type="text/javascript"></script>
</div>
<!-- –ü—Ä–∞–≤—ã–π –±–æ–∫–æ–≤–æ–π –±–∞–Ω–Ω–µ—Ä -->
<div class="ad-right">
<script type="text/javascript">
	atOptions = {
		'key' : '766301ab751df8665553f47e1f05709a',
		'format' : 'iframe',
		'height' : 600,
		'width' : 160,
		'params' : {}
	};
</script>
<script src="//www.highperformanceformat.com/766301ab751df8665553f47e1f05709a/invoke.js" type="text/javascript"></script>
</div>
<!-- injected: mobile menu controller -->
<script>
(function(){
  var btn = document.getElementById('menu-btn');
  var menu = document.getElementById('menu');
  var bd   = document.getElementById('menu-backdrop');
  var closeBtn = document.getElementById('menuClose');
  if(!btn || !menu){ return; }

  function setOpen(state){
    if(state){
      menu.classList.add('open'); menu.classList.remove('hidden');
      if(bd){ bd.classList.remove('hidden'); bd.classList.remove('md:hidden'); }
      document.body.style.overflow='hidden';
      btn.setAttribute('aria-expanded','true');
      try{ btn.textContent='‚úï'; }catch(e){}
    }else{
      menu.classList.remove('open'); setTimeout(function(){ menu.classList.add('hidden'); },300);
      if(bd){ bd.classList.add('hidden'); }
      document.body.style.overflow='';
      btn.setAttribute('aria-expanded','false');
      try{ btn.textContent='‚ò∞'; }catch(e){}
    }
  }
  function toggle(){ setOpen(!menu.classList.contains('open')); }

  // neutralize only old listeners on the button, not touching other scripts
  try{ var clone = btn.cloneNode(true); btn.parentNode.replaceChild(clone, btn); btn = document.getElementById('menu-btn'); }catch(e){}

  btn.addEventListener('click', toggle);
  if(bd) bd.addEventListener('click', function(){ setOpen(false); });
  if(closeBtn) closeBtn.addEventListener('click', function(){ setOpen(false); });
  document.addEventListener('keydown', function(e){ if(e.key==='Escape') setOpen(false); });
})();
</script>
</body>
</html>